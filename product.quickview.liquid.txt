{% layout none %}

{% assign tabs = product.metafields.hrvptabs.tabs %}
{% assign check_pro_tab = false %}
{% if tabs %}
{% assign check_pro_tab = true %}
{% comment %}Split two or three tabs{% endcomment %}
{% assign tabList = tabs | append: '' | split: '@@###@@' %}
{% endif %}

{%- comment -%} TAGS {%- endcomment -%}
{%- assign countdown = false -%}
{%- assign checkgift = false -%}

{% for tag in product.tags%}

{% if tag contains 'dealday'%}
{% assign countdown = true %}
{% assign countdown_time = tag  %}
{% endif %}

{%- if tag == 'giftbox' -%} {%- assign checkgift = true -%} {%- endif -%}
{% endfor %}
{%- comment -%}<!-- Pre Order -->   {%- endcomment -%}
{%- assign preorder_form = false -%}
{%- for item in product.collections -%}
{%- if item.handle == settings.collection_preorder -%}
{%- assign preorder_form = true -%}
{%- break -%}
{%- endif -%}
{%- endfor -%}
<div class="modal-header modal-paramlink">
	<div class="modal-close quickview-close" data-dismiss="modal" aria-label="Close">
		{%-comment-%}
		<a href="javascript:void(0);">
			<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve"> <g> <path d="M19,981.1c6,6,13.8,8.9,21.6,8.9c7.8,0,15.7-3,21.7-9L500,542.8L937.7,981c6,6,13.8,9,21.7,9c7.8,0,15.7-3,21.6-8.9c12-11.9,12-31.3,0-43.3L543.8,500L981,62.3c11.9-12,11.9-31.4,0-43.3c-12-12-31.4-12-43.3,0L500,457.2L62.3,19C50.3,7,30.9,7,19,19C7,30.9,7,50.3,19,62.3L456.1,500L19,937.7C7,949.7,7,969.1,19,981.1L19,981.1z" /> </g> </svg>
		</a>
		{%-endcomment-%}
	</div>
	<div class="paramlink-topbar text-center">
		<h4 class="purl-title"><span>{{product.title}}</span></h4>
		<p class="purl-link">{{shop.url | remove: 'https://' | remove: 'http://'}}</p>
	</div>
</div>
<div class="modal-body modal-detailProduct">
	<div class="productDetail-information">
		<div class="productDetail--gallery">
			<div class="product-container-gallery">
				{%- comment -%}
				<div class="actionPrev-link hidden">
					<a id="backto-page" href="javascript:void(0);">
						<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.5 34.29"> <polygon points="2.17 19.31 17.14 34.28 19.31 32.12 5.87 18.68 47.5 18.68 47.5 15.61 5.87 15.61 19.31 2.17 17.14 0 2.17 14.98 0 17.14 2.17 19.31" /> </svg>
					</a>
				</div>
				{%- endcomment -%}
				{% if product.images.size > 0 %}
				<div class="wrapbox-image">
					{% if product.images.size > 1 %}							
					<ul class="quickview-sliderproduct owl-carousel" id="quickview-sliderproduct">
						{% for thumb in product.images %}
						<li class="product-gallery"  data-image="{{ thumb.src | product_img_url : 'master' }}">
							<a class="gallery-item boxlazy-img" data-image="{{ thumb.src | product_img_url : 'master' }}">	
								<div class="boxlazy-img__insert lazy-img__prod">
									<span class="boxlazy-img__aspect">
										<img src="{{ thumb.src | product_img_url : 'master' }}" alt="{% if product.images.alt.size >0 %}{{ product.images.alt  | strip_html | escape }} {% else%} {{product.title | strip_html | escape }} {% endif %}">
									</span>
								</div>
							</a>					
						</li>	
						{% endfor %}
					</ul>		
					<ul class="quickview-sliderthumb  owl-carousel" id="quickview-thumbproduct">
						{% for thumb in product.images %}
						<li class="product-thumb" data-image="{{ thumb.src | product_img_url : 'compact' }}">
							<a class="product-thumb__item boxlazy-img"  href="javascript:void(0);" >					
								<div class="boxlazy-img__insert lazy-img__prod">
									<span class="boxlazy-img__aspect">
										<img src="{{ thumb.src | product_img_url : 'compact' }}" alt="{% if product.images.alt.size >0 %}{{ product.images.alt  | strip_html | escape }} {% else%} {{product.title | strip_html | escape }} {% endif %}">
									</span>
								</div>
							</a>					
						</li>	
						{% endfor %}
					</ul>
					{% else %}
					<div class="product-gallery">
						<img src="{{ product.featured_image | product_img_url : '1024x1024' }}" alt="{% if product.images.alt.size >0 %}{{ product.images.alt  | strip_html | escape }} {% else%} {{product.title | strip_html | escape }} {% endif %}">
					</div>
					{%endif%}
				</div>
				{% else %}
				<div class="wrapbox-image no_gallery">
					<div class="product-gallery">
						<img src="{{'no_image.jpg' | asset_url}}" width="100%" alt="{% if product.images.alt.size >0 %}{{ product.images.alt  | strip_html | escape }} {% else%} {{product.title | strip_html | escape }} {% endif %}"/>
					</div>			
				</div>
				{% endif %}
				{% if product.compare_at_price > product.price %}
				{% endif %}	
			</div>
		</div>
		<div class="productDetail--content">
			<div class="wrapbox-detail">
				<div class="product-heading">
					<h2>{{ product.title }}</h2>
					{% if product.variants[0].sku %}
					<span class="pro_sku">Mã sản phẩm: <strong>{{product.variants[0].sku}}</strong> </span>
					{% endif %}
					{%- if settings.prod_vendor_show -%}
					{%- unless product.vendor == 'Khác' -%}
					<span class="pro-vendor">Thương hiệu: <strong>{{product.vendor | link_to_vendor}}</strong></span>
					{%- endunless -%}
					{%- endif -%}
				</div>
				{%- if settings.promotion_hrvapp_use and settings.promotion_hrvapp == 'appcombo' or settings.promotion_hrvapp == 'appbuyxgety' -%}
				<div class="product-promotion">
					<div class="promotion-inner">
						<div class="pro-image">
							<img src="{{ settings.combo_icon_qickview }}" alt="{{ settings.combo_text_qickview }}">
						</div>
						<div class="pro-txt">{{settings.combo_text_qickview}}</div>
						<div class="pro-icon">
							<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24"><g><g id="_15" data-name="15"><path d="m9 19a1 1 0 0 1 -.71-1.71l5.3-5.29-5.3-5.29a1 1 0 0 1 1.42-1.42l6 6a1 1 0 0 1 0 1.41l-6 6a1 1 0 0 1 -.71.3z"></path></g></g></svg>
						</div>
						<a href="{{ product.url }}{%if settings.promotion_hrvapp == 'appcombo'%}#product-app-combo{%else%}#product-app-buyxgety{%endif%}" class="pro-link"></a>
					</div>
				</div>
				{%- endif -%}
				{% assign hide_default_title = false %}
				{% if product.variants.size == 1 and product.variants.first.title contains 'Default' and product.options.size == 1 %}
				{% assign hide_default_title = true %}
				{% endif %}

				<div class="product-viewaction quickview-toolbarproduct" id="toolbarProduct">
					<div class="productToolbar-addcart">
						<div class="product-actions">
							{%-if checkgift-%}
							<div class="block-addcart">						
								<button type="button" id="add-to-cartQuickview" disabled class="disabled add-to-cartProduct button dark btn-addtocart addtocart-modal"> 
									Hàng tặng
								</button>
							</div>	
							{%-else-%}
							<div class="block-addcart">						
								<button type="button" class="button dark btn-contact-zalo"
        onclick="window.open('https://zalo.me/0837333537','_blank')">
  Liên hệ Zalo 0837.33.35.37
</button>
							</div>	
							{%-endif-%}
						</div>
					</div>
				</div>
				{%- if settings.products_social_icons -%}
				<div class="product-toshare">
					<span class="pro-title">Chia sẻ: </span>
					<a href="//www.facebook.com/sharer/sharer.php?u={{ shop.url }}{{ product.url }}" target="_blank" aria-label="facebook" class="tooltip-cs share-facebook">
						<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 512 512"><g><g><path d="m512 256c0 127.78-93.62 233.69-216 252.89v-178.89h59.65l11.35-74h-71v-48.02c0-20.25 9.92-39.98 41.72-39.98h32.28v-63s-29.3-5-57.31-5c-58.47 0-96.69 35.44-96.69 99.6v56.4h-65v74h65v178.89c-122.38-19.2-216-125.11-216-252.89 0-141.38 114.62-256 256-256s256 114.62 256 256z" fill="#1877f2" data-original="#1877f2"></path><path d="m355.65 330 11.35-74h-71v-48.021c0-20.245 9.918-39.979 41.719-39.979h32.281v-63s-29.296-5-57.305-5c-58.476 0-96.695 35.44-96.695 99.6v56.4h-65v74h65v178.889c13.034 2.045 26.392 3.111 40 3.111s26.966-1.066 40-3.111v-178.889z" fill="#ffffff" data-original="#ffffff"></path></g></g></svg>
						<span class="tooltip-hover">Facebook</span>
					</a>
					<a href="https://m.me/{{settings.code_messenger_mb}}" target="_blank" rel="noreferrer" aria-label="messenger" class="tooltip-cs share-messenger">
						<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 28 28"><g fill="none" fill-rule="evenodd"><g><g><g><g><g><g transform="translate(-293.000000, -708.000000) translate(180.000000, 144.000000) translate(16.000000, 16.000000) translate(0.000000, 548.000000) translate(61.000000, 0.000000) translate(36.000000, 0.000000)"><circle cx="14" cy="14" r="14" fill="#0084FF"/><path fill="#FFF" d="M14.848 15.928l-1.771-1.9-3.457 1.9 3.802-4.061 1.815 1.9 3.414-1.9-3.803 4.061zM14.157 7.2c-3.842 0-6.957 2.902-6.957 6.481 0 2.04 1.012 3.86 2.593 5.048V21.2l2.368-1.308c.632.176 1.302.271 1.996.271 3.842 0 6.957-2.902 6.957-6.482S17.999 7.2 14.157 7.2z"/></g></g></g></g></g></g></g></svg>
						<span class="tooltip-hover">Messenger</span>
					</a>
					{%comment%}
					<a href="" target="_blank" class="tooltip-cs share-zalo">
						<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 48 48" style=" fill:#000000;"><path fill="#2962ff" d="M15,36V6.827l-1.211-0.811C8.64,8.083,5,13.112,5,19v10c0,7.732,6.268,14,14,14h10	c4.722,0,8.883-2.348,11.417-5.931V36H15z"></path><path fill="#eee" d="M29,5H19c-1.845,0-3.601,0.366-5.214,1.014C10.453,9.25,8,14.528,8,19	c0,6.771,0.936,10.735,3.712,14.607c0.216,0.301,0.357,0.653,0.376,1.022c0.043,0.835-0.129,2.365-1.634,3.742	c-0.162,0.148-0.059,0.419,0.16,0.428c0.942,0.041,2.843-0.014,4.797-0.877c0.557-0.246,1.191-0.203,1.729,0.083	C20.453,39.764,24.333,40,28,40c4.676,0,9.339-1.04,12.417-2.916C42.038,34.799,43,32.014,43,29V19C43,11.268,36.732,5,29,5z"></path><path fill="#2962ff" d="M36.75,27C34.683,27,33,25.317,33,23.25s1.683-3.75,3.75-3.75s3.75,1.683,3.75,3.75	S38.817,27,36.75,27z M36.75,21c-1.24,0-2.25,1.01-2.25,2.25s1.01,2.25,2.25,2.25S39,24.49,39,23.25S37.99,21,36.75,21z"></path><path fill="#2962ff" d="M31.5,27h-1c-0.276,0-0.5-0.224-0.5-0.5V18h1.5V27z"></path><path fill="#2962ff" d="M27,19.75v0.519c-0.629-0.476-1.403-0.769-2.25-0.769c-2.067,0-3.75,1.683-3.75,3.75	S22.683,27,24.75,27c0.847,0,1.621-0.293,2.25-0.769V26.5c0,0.276,0.224,0.5,0.5,0.5h1v-7.25H27z M24.75,25.5	c-1.24,0-2.25-1.01-2.25-2.25S23.51,21,24.75,21S27,22.01,27,23.25S25.99,25.5,24.75,25.5z"></path><path fill="#2962ff" d="M21.25,18h-8v1.5h5.321L13,26h0.026c-0.163,0.211-0.276,0.463-0.276,0.75V27h7.5	c0.276,0,0.5-0.224,0.5-0.5v-1h-5.321L21,19h-0.026c0.163-0.211,0.276-0.463,0.276-0.75V18z"></path></svg>
						<span class="tooltip-hover">Zalo</span>
					</a>
					{%endcomment%}
					<a href="https://twitter.com/intent/tweet?text=optional%20promo%20text%20{{ shop.url }}{{ product.url }}" target="_blank" aria-label="twitter" class="tooltip-cs share-twitter">
						<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 291.319 291.319"><g><g><path style="" d="M145.659,0c80.45,0,145.66,65.219,145.66,145.66c0,80.45-65.21,145.659-145.66,145.659 S0,226.109,0,145.66C0,65.219,65.21,0,145.659,0z" fill="#26a6d1" data-original="#26a6d1" class="hovered-path"></path><path style="" d="M236.724,98.129c-6.363,2.749-13.21,4.597-20.392,5.435c7.338-4.27,12.964-11.016,15.613-19.072 c-6.864,3.96-14.457,6.828-22.55,8.366c-6.473-6.691-15.695-10.87-25.909-10.87c-19.591,0-35.486,15.413-35.486,34.439 c0,2.704,0.31,5.335,0.919,7.857c-29.496-1.438-55.66-15.158-73.157-35.996c-3.059,5.089-4.807,10.997-4.807,17.315 c0,11.944,6.263,22.504,15.786,28.668c-5.826-0.182-11.289-1.721-16.086-4.315v0.437c0,16.696,12.235,30.616,28.476,33.784 c-2.977,0.783-6.109,1.211-9.35,1.211c-2.285,0-4.506-0.209-6.673-0.619c4.515,13.692,17.625,23.651,33.165,23.925	c-12.153,9.249-27.457,14.748-44.089,14.748c-2.868,0-5.69-0.164-8.476-0.482c15.722,9.777,34.367,15.485,54.422,15.485 c65.292,0,100.997-52.51,100.997-98.029l-0.1-4.461C225.945,111.111,231.963,105.048,236.724,98.129z" fill="#ffffff" data-original="#ffffff"></path></g></g></svg>
						<span class="tooltip-hover">Twitter</span>
					</a>
					<a href="//pinterest.com/pin/create/link/?url={{ shop.url }}&media={{product.featured_image}}&description={{product.title}}" target="_blank" aria-label="pinterest" class="tooltip-cs share-pinterest">
						<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 112.198 112.198"><g><g><circle cx="56.099" cy="56.1" r="56.098" fill="#cb2027" data-original="#cb2027"></circle><g><path style="" d="M60.627,75.122c-4.241-0.328-6.023-2.431-9.349-4.45c-1.828,9.591-4.062,18.785-10.679,23.588 c-2.045-14.496,2.998-25.384,5.34-36.941c-3.992-6.72,0.48-20.246,8.9-16.913c10.363,4.098-8.972,24.987,4.008,27.596 c13.551,2.724,19.083-23.513,10.679-32.047c-12.142-12.321-35.343-0.28-32.49,17.358c0.695,4.312,5.151,5.621,1.78,11.571 c-7.771-1.721-10.089-7.85-9.791-16.021c0.481-13.375,12.018-22.74,23.59-24.036c14.635-1.638,28.371,5.374,30.267,19.14 C85.015,59.504,76.275,76.33,60.627,75.122L60.627,75.122z" fill="#f1f2f2" data-original="#f1f2f2" class=""></path></g></g></g></svg>
						<span class="tooltip-hover">Pinterest</span>
					</a>
					<a class="tooltip-cs share-link-js" name="copy-link" data-url="{{ shop.url }}{{ product.url }}">
						<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 496.158 496.158"><g><path style="" d="M0,248.085C0,111.064,111.07,0.003,248.076,0.003c137.012,0,248.082,111.061,248.082,248.082 c0,137.002-111.07,248.07-248.082,248.07C111.07,496.155,0,385.087,0,248.085z" fill="#25b7d3" data-original="#25b7d3" class=""></path><g><path style="" d="M394.463,151.309l-49.615-49.614c-10.727-10.728-28.119-10.726-38.844,0l-76.631,76.63 c-10.726,10.728-10.727,28.119-0.001,38.847l49.615,49.614c10.727,10.727,28.119,10.726,38.845-0.002l76.631-76.63 C405.188,179.429,405.189,162.036,394.463,151.309z M312.59,235.423c-6.289,6.288-16.484,6.289-22.772,0.001l-29.084-29.084 c-6.288-6.288-6.287-16.483,0.001-22.772l50.511-50.511c6.287-6.287,16.482-6.288,22.771,0l29.084,29.085	c6.288,6.287,6.287,16.482,0,22.77L312.59,235.423z" fill="#ffffff" data-original="#ffffff" class=""></path><path style="" d="M266.786,278.986l-49.614-49.614c-10.727-10.727-28.119-10.726-38.845,0l-76.631,76.632 c-10.726,10.726-10.727,28.118,0,38.844l49.615,49.615c10.726,10.727,28.119,10.725,38.844,0l76.632-76.633 C277.511,307.105,277.513,289.713,266.786,278.986z M184.912,363.1c-6.288,6.288-16.482,6.29-22.771,0.001l-29.084-29.084 c-6.289-6.288-6.288-16.483,0-22.771l50.512-50.512c6.287-6.287,16.482-6.288,22.771,0l29.084,29.084 c6.288,6.289,6.287,16.484,0,22.771L184.912,363.1z" fill="#ffffff" data-original="#ffffff" class=""></path></g><path style="" d="M306.907,191.673l-2.42-2.421c-7.742-7.743-20.34-7.743-28.083,0l-87.151,87.151 c-7.742,7.742-7.742,20.34,0,28.082l2.42,2.421c7.742,7.741,20.34,7.741,28.083,0l87.151-87.152 C314.649,212.013,314.649,199.414,306.907,191.673z" fill="#48a1af" data-original="#48a1af"></path><path style="" d="M215.398,302.548c-5.348,5.348-14.02,5.349-19.368,0.001l-2.421-2.421 c-5.348-5.348-5.348-14.02,0-19.367l87.152-87.152c5.348-5.349,14.019-5.348,19.368,0.002l2.42,2.42 c5.347,5.348,5.349,14.019,0,19.366L215.398,302.548z" fill="#ffffff" data-original="#ffffff" class=""></path><g></g></g></svg>
						<span class="tooltip-hover">Sao chép url</span>
					</a>
				</div>
				{%-endif-%}

				{%- if preorder_form -%}
				<div class="product-form-preorder">
					<div class="contact_form_tt">{{settings.preorder_text_btn}}</div>
					<div class="contact_form_pr">
						{%- capture formPreorder -%}
						{%- form 'contact' -%}
						<div class="row">
							<div class="col-sm-12 col-xs-12 col-12 ">
								<div class="input-group">
									<input required="required" type="text" name="contact[name]" class="form-control" placeholder="Họ và tên " aria-describedby="basic-addon1">
								</div>
								<div class="input-group">
									<input required="required" type="text" pattern="^(.)+@[A-Za-z0-9]([A-Za-z0-9.\-]*[A-Za-z0-9])?\.[A-Za-z]{1,13}$" name="contact[email]" class="form-control" placeholder="Địa chỉ email" aria-describedby="basic-addon1">
								</div>
								<div class="input-group">
									<input pattern="[0-9]{10,12}" required="required" type="text" name="contact[phone]" class="form-control" placeholder="Số điện thoại" aria-describedby="basic-addon1">
								</div>
								<div class="input-group">
									<textarea class="product-body-val" rows="4" cols="50" name="content" placeholder="Nội dung" value=""></textarea>
									<input class="detailPr" name="contact[body]" type="hidden" 
												 product-name="{{product.title}}" product-url="{{product.url}}">
								</div>
							</div>
							<div class="col-sm-12 col-xs-12 col-12 text-center">
								{% if form.posted_successfully? %}<div class="alert alert-preorder d-none" id="qvform-preorder--success"></div>{%- endif -%}			
								<div class="alert alert-preorder qvform-preorder--status" ></div>
								<div class="sitebox-recaptcha" >
									This site is protected by reCAPTCHA and the Google
									<a href="https://policies.google.com/privacy" target="_blank" rel="nofollow noreferrer">Privacy Policy</a> 
									and <a href="https://policies.google.com/terms" target="_blank" rel="nofollow noreferrer">Terms of Service</a> apply.
								</div>
								<button type="submit" class="button btnred btn-submit-contact-pr">{{settings.preorder_text_btn_popup}}</button>
							</div>
						</div>
						{%- endform -%}	
						{%- endcapture -%}
						{{ formPreorder | replace:'script','noscript' | replace:'noscript src=', 'noscript data-src='}}
					</div>
				</div>
				{%-endif-%}
				<div class="product-viewdetail text-left">
					<a href="{{product.url}}" class="productdetail-link">Xem chi tiết sản phẩm</a>
					<i class="fa fa-angle-double-right" aria-hidden="true"></i>
				</div>
			</div>
		</div>
	</div>
</div>
<script>
	$(document).ready(function(){
		$(document).on("submit", "#quick-view-modal form.contact-form", function (e) {
			e.preventDefault();
			var self = $(this);

			self.find('input.detailPr').val('');
			var vlTextbody = self.find('textarea.product-body-val').val();
			var handlePr = window.location.origin + self.find('input.detailPr').attr('product-url');
			var vlTextPr = self.find('input.detailPr').attr('product-name') + '\n' + 'Link sản phẩm: '+handlePr;		
			var swatchSize_qv = parseInt($('#add-item-form-quickview .select-swatch .swatch').length);
			if(swatchSize_qv == 1){
				var vlVariant = 'Biến thể: '+$('#add-item-form-quickview .select-swatch .swatch').find('label.sd span').html();				
			}
			else if(swatchSize_qv == 2){
				var vlVariant = 'Biến thể: '+$('#add-item-form-quickview .select-swatch .swatch').find('label.sd span').html()+' | '+
						$('#add-item-form-quickview .select-swatch .swatch').next().find('label.sd span').html();
			}
			else if(swatchSize_qv == 3){
				var vlVariant = 'Biến thể: '+$('#add-item-form-quickview .select-swatch .swatch').find('label.sd span').html()+' | '+
						$('#add-item-form-quickview .select-swatch .swatch').next().find('label.sd span').html()+' | '+
						$('#add-item-form-quickview .select-swatch .swatch').next().next().find('label.sd span').html();				
			}
			else{
				var vlVariant = '';
			}

			$('#quick-view-modal input.detailPr').val(vlTextbody+'\n'+vlTextPr+'\n'+vlVariant);
			grecaptcha.ready(function() {
				grecaptcha.execute('6LdD18MUAAAAAHqKl3Avv8W-tREL6LangePxQLM-', {action: 'submit'}).then(function(token) {
					self.find('input[name="g-recaptcha-response"]').val(token);
					$.ajax({
						type: 'POST',
						url:'/contact',
						data: $('#quick-view-modal form.contact-form').serialize(),	
						success:function(data){	
							console.log(data.status);
							$('#quick-view-modal .btn-submit-contact-pr').css('pointer-events','none');
							$('#quick-view-modal form.contact-form .qvform-preorder--status').html('Cảm ơn bạn đã liên hệ với chúng tôi!')
							$('#quick-view-modal form.contact-form .qvform-preorder--status').removeClass('alert-danger').addClass('alert-success');
							$('#quick-view-modal form.contact-form .qvform-preorder--status').slideDown();
							setTimeout(function(){
								$('#quick-view-modal').modal('hide');
								$('#quick-view-modal').on('hidden.bs.modal', function(e) { 
									location.reload();
								});
							},4000)
							/*
						if($(data).find('#qvform-preorder--success').length > 0){		
						}
						else{
								$('#quick-view-modal form.contact-form .qvform-preorder--status').html('Thông tin bạn nhập chưa chính xác. Vui lòng kiểm tra lại!')
								$('#quick-view-modal form.contact-form .qvform-preorder--status').removeClass('alert-success').addClass('alert-danger');
								$('#quick-view-modal form.contact-form .qvform-preorder--status').slideDown();
							}
						*/
							/*if (data.indexOf('contact_posted=true') > -1 ){ }*/
						}
					})
				});
			});
		});
	});
</script>
<script>
	var check_variant = true;
	var fIndex = false;
	var selectCallbackQuickview  = function(variant, selector) {
		if (variant){
			if(variant.inventory_management == null){
				jQuery('.product-available').find(".txt-inventory").html('');
			}else{
				var inventoryQty = variant.inventory_quantity;
				if(inventoryQty == 0){
					jQuery('.product-available').find(".txt-inventory").html('Đã bán hết');
				}else{
					if (inventoryQty > 10){
						jQuery('.product-available').find(".txt-inventory").html('');
					}
					else{
						jQuery('.product-available').find(".txt-inventory").html('Đã bán gần hết');
					}
				}
			}		
			if(variant.featured_image != null){			
				if($('#quickview-thumbproduct').hasClass('owl-loaded')){		
					var indeximg = $("li.product-gallery[data-image='"+Haravan.resizeImage(variant.featured_image.src,'master').replace('https:','')+"']").parent().index();
					$('#quickview-sliderproduct').trigger('to.owl.carousel', [indeximg, 500]);
					$('#quickview-thumbproduct').find('.owl-item').removeClass('current');
					$('#quickview-thumbproduct').find('.owl-item:nth-child('+ (indeximg + 1) +')').addClass('current');	
				}
				else{
					$('#quickview-thumbproduct').on('initialized.owl.carousel', function() {
						var indeximg = $("li.product-gallery[data-image='"+Haravan.resizeImage(variant.featured_image.src,'master').replace('https:','')+"']").parent().index();

						setTimeout(function(){	
							$('#quickview-sliderproduct').trigger('to.owl.carousel', [indeximg, 500]);
							$('#quickview-thumbproduct').find('.owl-item').removeClass('current');
							$('#quickview-thumbproduct').find('.owl-item:nth-child('+ (indeximg + 1) +')').addClass('current');	
						},300);
					});
				}
			}

			if(variant.sku != null ){
				jQuery('.pro_sku').html('Mã sản phẩm: ' + '<strong>' + variant.sku + '</strong>');
			}
			if(variant.price < variant.compare_at_price){
				var pro_sold = variant.price ;
				var pro_comp = variant.compare_at_price / 100;
				var sale = 100 - (pro_sold / pro_comp) ;
				var kq_sale = Math.round(sale);
				jQuery('.product-percent').html('<span class="pro-sale">-' + kq_sale + '%<br> OFF </span>');
				var html = '<span class="pro-title">Giá 1 chiếc: </span>' + '<span class="pro-price">' + Haravan.formatMoney(pro_sold, "{{ shop.money_format }}") + '</span>' + '<del>' + Haravan.formatMoney(variant.compare_at_price, "{{ shop.money_format }}") + '</del>' + '<span class="pro-percent">-'+ kq_sale +'%</span>';	
				jQuery('#price-preview-quickview').html(html);
			} 
			else {
				jQuery('.product-percent').html('');
				jQuery('#price-preview-quickview').html("<span class='pro-title'>Giá 1 chiếc: </span>" + "<span class='pro-price'>" + Haravan.formatMoney(variant.price, "{{ shop.money_format }}" + "</span>"));
			}
			if (variant.available){
				jQuery('.productToolbar-addcart .add-to-cartProduct').removeAttr('disabled').removeClass('disabled').html("<span>Thêm vào giỏ</span>");
				//	jQuery('#detail-product #buy-now').removeAttr('disabled').removeClass('disabled').html("<span>Mua ngay</span>").show();
				jQuery('#detail-product-quickview .pro-soldold strong').text('Còn hàng');
				check_variant = true;
			} 
			else {
				jQuery('.productToolbar-addcart .add-to-cartProduct').addClass('disabled').attr('disabled', 'disabled').html("<span>Hết hàng</span>");
				//jQuery('#detail-product-quickview #buy-now').addClass('disabled').attr('disabled', 'disabled').html("<span>Hết hàng</span>").hide();
				var message = variant ? "Hết hàng" : "Không có hàng";
				jQuery('#detail-product .pro-soldold strong').text(message);
				check_variant = false;
			}
		}
		else{
			jQuery('.productToolbar-addcart .add-to-cartProduct').addClass('disabled').attr('disabled', 'disabled').html("<span>Hết hàng</span>");
			//	jQuery('#detail-product-quickview #buy-now').addClass('disabled').attr('disabled', 'disabled').html("<span>Hết hàng</span>").hide();
			var message = "Không có hàng";
			jQuery('#detail-product .pro-soldold strong').text(message);
			check_variant = false;
		}
		return check_variant;
	};
	jQuery(document).ready(function($){
		{%if product.variants.size == 1 and product.variants.first.title contains 'Default'%}
		{%else%}
		new Haravan.OptionSelectors("product-select-quickview", { product: {{ product | json }}, onVariantSelected: selectCallbackQuickview  });

		 // Add label if only one product option and it isn't 'Title'.
		 {% if product.options.size == 1 and product.options.first != 'Tiêu đề' %}
		 $('#detail-product .selector-wrapper:eq(0)').prepend('<label>{{ product.options.first }}</label>');
			{% endif %} 
			// Auto-select first available variant on page load.
			{% assign found_one_in_stock = false %}
			{% for variant in product.variants %}
			{% if variant.available and found_one_in_stock == false %}
			{% assign found_one_in_stock = true %}
			{% for option in product.options %}
			$('#detail-product .single-option-selector:eq({{ forloop.index0 }})').val({{ variant.options[forloop.index0] | json }}).trigger('change');
			 {% endfor %}
			 {% endif %}
			 {% endfor %}
			 $('#detail-product .selector-wrapper select').each(function(){
				 $(this).wrap( '<span class="custom-dropdown custom-dropdown--white"></span>');
				 $(this).addClass("custom-dropdown__select custom-dropdown__select--white");
			 });
				{%endif%}
				});
</script>
<script>
	var swatch_size_qv = parseInt($('#add-item-form-quickview .select-swatch .swatch').length);
	jQuery(document).on('click','#add-item-form-quickview .swatch input', function(e) {  
		e.preventDefault();
		var $this = $(this);
		var _available = '';
		$this.parent().siblings().find('label').removeClass('sd');
		$this.next().addClass('sd');
		var name = $this.attr('name');
		var value = $this.val();
		$('#add-item-form-quickview select[data-option='+name+']').val(value).trigger('change');
		if(swatch_size_qv == 2){
			if(name.indexOf('1') != -1){
				$('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element').find('input').prop('disabled', false);
				$('#add-item-form-quickview #variant-swatch-2-quickview .swatch-element').find('input').prop('disabled', false);
				$('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element label').removeClass('sd');
				$('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element').removeClass('soldout');
				$('#add-item-form-quickview .selector-wrapper .single-option-selector').eq(1).find('option').each(function(){
					var _tam = $(this).val();
					$(this).parent().val(_tam).trigger('change');
					if(check_variant){
						if(_available == '' ){
							_available = _tam;
						}
					}else{
						$('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element[data-value="'+_tam+'"]').addClass('soldout');
						$('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element[data-value="'+_tam+'"]').find('input').prop('disabled', true);
					}
				})
				$('#add-item-form-quickview .selector-wrapper .single-option-selector').eq(1).val(_available).trigger('change');
				$('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element[data-value="'+_available+'"] label').addClass('sd');
			}
		}
		else if (swatch_size_qv == 3){
			var _count_op2 = $('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element').length;
			var _count_op3 = $('#add-item-form-quickview #variant-swatch-2-quickview .swatch-element').length;
			if(name.indexOf('1') != -1){
				$('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element').find('input').prop('disabled', false);
				$('#add-item-form-quickview #variant-swatch-2-quickview .swatch-element').find('input').prop('disabled', false);
				$('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element label').removeClass('sd');
				$('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element').removeClass('soldout');
				$('#add-item-form-quickview #variant-swatch-2-quickview .swatch-element label').removeClass('sd');
				$('#add-item-form-quickview #variant-swatch-2-quickview .swatch-element').removeClass('soldout');
				var _avi_op1 = '';
				var _avi_op2 = '';
				$('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element').each(function(ind,value){
					var _key = $(this).data('value');
					var _unavi = 0;
					$('#add-item-form-quickview .single-option-selector').eq(1).val(_key).change();
					$('#add-item-form-quickview #variant-swatch-2-quickview .swatch-element label').removeClass('sd');
					$('#add-item-form-quickview #variant-swatch-2-quickview .swatch-element').removeClass('soldout');
					$('#add-item-form-quickview #variant-swatch-2-quickview .swatch-element').find('input').prop('disabled', false);
					$('#add-item-form-quickview #variant-swatch-2-quickview .swatch-element').each(function(i,v){
						var _val = $(this).data('value');
						$('#add-item-form-quickview .single-option-selector').eq(2).val(_val).change();
						if(check_variant == true){
							if(_avi_op1 == ''){
								_avi_op1 = _key;
							}
							if(_avi_op2 == ''){
								_avi_op2 = _val;
							}
							//console.log(_avi_op1 + ' -- ' + _avi_op2)
						}else{
							_unavi += 1;
						}
					})
					if(_unavi == _count_op3){
						$('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element[data-value = "'+_key+'"]').addClass('soldout');
						setTimeout(function(){
							$('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element[data-value = "'+_key+'"] input').attr('disabled','disabled');
						})
					}
				})
				$('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element[data-value="'+_avi_op1+'"] input').click();
			}
			else if(name.indexOf('2') != -1){
				$('#add-item-form-quickview #variant-swatch-2-quickview .swatch-element label').removeClass('sd');
				$('#add-item-form-quickview #variant-swatch-2-quickview .swatch-element').removeClass('soldout');
				$('#add-item-form-quickview #variant-swatch-2-quickview .swatch-element').find('input').prop('disabled', false);
				$('#add-item-form-quickview .selector-wrapper .single-option-selector').eq(2).find('option').each(function(){

					var _tam = $(this).val();
					$(this).parent().val(_tam).trigger('change');
					if(check_variant){
						if(_available == '' ){
							_available = _tam;
						}
					}else{
						$('#add-item-form-quickview #variant-swatch-2-quickview .swatch-element[data-value="'+_tam+'"]').addClass('soldout');
						$('#add-item-form-quickview #variant-swatch-2-quickview .swatch-element[data-value="'+_tam+'"]').find('input').prop('disabled', true);
					}
				})
				$('#add-item-form-quickview .selector-wrapper .single-option-selector').eq(2).val(_available).trigger('change');
				$('#add-item-form-quickview #variant-swatch-2-quickview .swatch-element[data-value="'+_available+'"] label').addClass('sd');
			}
		}
		else{
		}
	})
	$(document).ready(function(){
		var _chage = '';
		$('#add-item-form-quickview .swatch-element[data-value="'+$('#add-item-form-quickview .selector-wrapper .single-option-selector').eq(0).val()+'"]').find('input').click();
		$('#add-item-form-quickview .swatch-element[data-value="'+$('#add-item-form-quickview .selector-wrapper .single-option-selector').eq(1).val()+'"]').find('input').click();
		if(swatch_size_qv == 2){
			var _avi_op1 = '';
			var _avi_op2 = '';
			var _count = $('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element').length;
			$('#add-item-form-quickview #variant-swatch-0-quickview .swatch-element').each(function(ind,value){
				var _key = $(this).data('value');
				var _unavi = 0;
				$('#add-item-form-quickview .single-option-selector').eq(0).val(_key).change();
				$('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element').each(function(i,v){
					var _val = $(this).data('value');
					$('#add-item-form-quickview .single-option-selector').eq(1).val(_val).change();
					if(check_variant == true){
						if(_avi_op1 == ''){
							_avi_op1 = _key;
						}
						if(_avi_op2 == ''){
							_avi_op2 = _val;
						}
					}else{
						_unavi += 1;
					}
				})
				if(_unavi == _count){
					//$('#add-item-form-quickview #variant-swatch-0-quickview .swatch-element[data-value = "'+_key+'"]').addClass('soldout');
					/*	$('#add-item-form-quickview #variant-swatch-0-quickview .swatch-element[data-value = "'+_key+'"]').find('input').attr('disabled','disabled');*/
				}
			})
			$('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element[data-value = "'+_avi_op2+'"] input').click();
			$('#add-item-form-quickview #variant-swatch-0-quickview .swatch-element[data-value = "'+_avi_op1+'"] input').click();
		}
		else if(swatch_size_qv == 3){
			var _avi_op1 = '';
			var _avi_op2 = '';
			var _avi_op3 = '';
			var _size_op2 = $('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element').length;
			var _size_op3 = $('#add-item-form-quickview #variant-swatch-2-quickview .swatch-element').length;
			$('#add-item-form-quickview #variant-swatch-0-quickview .swatch-element').each(function(ind,value){
				var _key_va1 = $(this).data('value');
				var _count_unavi = 0;
				$('#add-item-form-quickview .single-option-selector').eq(0).val(_key_va1).change();
				$('#add-item-form-quickview #variant-swatch-1-quickview .swatch-element').each(function(i,v){
					var _key_va2 = $(this).data('value');
					var _unavi_2 = 0;
					$('#add-item-form-quickview .single-option-selector').eq(1).val(_key_va2).change();
					$('#add-item-form-quickview #variant-swatch-2-quickview .swatch-element').each(function(j,z){
						var _key_va3 = $(this).data('value');
						$('#add-item-form-quickview .single-option-selector').eq(2).val(_key_va3).change();
						if(check_variant == true){
							if(_avi_op1 == ''){
								_avi_op1 = _key_va1;
							}
							if(_avi_op2 == ''){
								_avi_op2 = _key_va2;
							}
							if(_avi_op3 == ''){
								_avi_op3 = _key_va3;
							}
						}else{
							_unavi_2 += 1;
						}
					})
					if(_unavi_2 == _size_op3){
						_count_unavi += 1;
					}
				})
				if(_size_op2 == _count_unavi){
					//$('#add-item-form-quickview #variant-swatch-0-quickview .swatch-element[data-value = "'+_key_va1+'"]').addClass('soldout');
					/*$('#add-item-form-quickview #variant-swatch-0-quickview .swatch-element[data-value = "'+_key_va1+'"]').find('input').attr('disabled','disabled');*/
				}
			})
			$('#add-item-form-quickview #variant-swatch-0-quickview .swatch-element[data-value = "'+_avi_op1+'"] input').click();
		}
	});
	$(document).ready(function(){
		var vl = $('#add-item-form-quickview .swatch .color input').val();
		$('#add-item-form-quickview .swatch .color input').parents(".swatch").find(".header strong").html(vl);
		$("#add-item-form-quickview .select-swap .color" ).hover(function() { 
			var value = $( this ).data("value");
			$(this).parents(".swatch").find(".header strong").html( value );
		},function(){
			var value = $("#add-item-form-quickview .select-swap .color label.sd span").html();
			$(this).parents(".swatch").find(".header strong").html( value );
		});
	});
	//tooltip
	$(function () {
		if($(window).width() > 1200){
			$('.modal-detailProduct [data-toggle="popover"]').popover({
				container: 'body'
			})
		}
	})
</script>